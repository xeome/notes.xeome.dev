<!doctype html><html lang=en><head><meta charset=utf-8><meta name=description content="WIP
Link-state routing protocols Routers in a link-state routing protocol exchange information about the state of their own links via a process known as link-state advertising."><meta property="og:title" content="OSPF"><meta property="og:description" content="WIP
Link-state routing protocols Routers in a link-state routing protocol exchange information about the state of their own links via a process known as link-state advertising."><meta property="og:type" content="website"><meta property="og:image" content="https://xeome.github.io/icon.png"><meta property="og:url" content="https://xeome.github.io/notes/OSPF/"><meta property="og:width" content="200"><meta property="og:height" content="200"><meta name=twitter:card content="summary"><meta name=twitter:title content="OSPF"><meta name=twitter:description content="WIP
Link-state routing protocols Routers in a link-state routing protocol exchange information about the state of their own links via a process known as link-state advertising."><meta name=twitter:image content="https://xeome.github.io/icon.png"><title>OSPF</title><meta name=viewport content="width=device-width,initial-scale=1"><link rel="shortcut icon" type=image/png href=https://xeome.github.io//icon.png><link href=https://xeome.github.io/styles.56fda312aefe26efb1fe5fe56affb512.min.css rel=stylesheet><link href=https://xeome.github.io/styles/_light_syntax.86a48a52faebeaaf42158b72922b1c90.min.css rel=stylesheet id=theme-link><script src=https://xeome.github.io/js/darkmode.7f967d9bd2d1cac02e762b5c57efc6ae.min.js></script>
<script src=https://xeome.github.io/js/util.a0ccf91e1937fe761a74da4946452710.min.js></script>
<link rel=preload href=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.css as=style onload='this.onload=null,this.rel="stylesheet"' integrity=sha384-R4558gYOUz8mP9YWpZJjofhk+zx0AS11p36HnD2ZKj/6JR5z27gSSULCNHIRReVs crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.js integrity=sha384-z1fJDqw8ZApjGO3/unPWUPsIymfsJmyrDVWC8Tv/a1HeOtGmkwNd/7xUS0Xcnvsx crossorigin=anonymous></script>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/contrib/auto-render.min.js integrity=sha384-+XBljXPPiv+OzfbB3cVmLHf4hdUFHlWNZN5spNQ7rmHTXpd7WvJum6fIACpNNfIR crossorigin=anonymous></script>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.2/dist/contrib/copy-tex.min.js integrity=sha384-ww/583aHhxWkz5DEVn6OKtNiIaLi2iBRNZXfJRiY1Ai7tnJ9UXpEsyvOITVpTl4A crossorigin=anonymous></script>
<script src=https://cdn.jsdelivr.net/npm/@floating-ui/core@1.2.1></script>
<script src=https://cdn.jsdelivr.net/npm/@floating-ui/dom@1.2.1></script>
<script async src=https://xeome.github.io/js/popover.aa9bc99c7c38d3ae9538f218f1416adb.min.js></script>
<script defer src=https://xeome.github.io/js/code-title.ce4a43f09239a9efb48fee342e8ef2df.min.js></script>
<script defer src=https://xeome.github.io/js/clipboard.2913da76d3cb21c5deaa4bae7da38c9f.min.js></script>
<script defer src=https://xeome.github.io/js/callouts.7723cac461d613d118ee8bb8216b9838.min.js></script>
<script>const SEARCH_ENABLED=!1,LATEX_ENABLED=!0,PRODUCTION=!0,BASE_URL="https://xeome.github.io/",fetchData=Promise.all([fetch("https://xeome.github.io/indices/linkIndex.c4a3395cf6c38ca7c03221e0c541285a.min.json").then(e=>e.json()).then(e=>({index:e.index,links:e.links})),fetch("https://xeome.github.io/indices/contentIndex.f7e4f39a558fa57aabb74efba056c593.min.json").then(e=>e.json())]).then(([{index:e,links:t},n])=>({index:e,links:t,content:n})),render=()=>{const e=new URL(BASE_URL),t=e.pathname,n=window.location.pathname,s=t==n;addCopyButtons(),addTitleToCodeBlocks(),addCollapsibleCallouts(),initPopover("https://xeome.github.io",!0);const o=document.getElementById("footer");if(o){const e=document.getElementById("graph-container");if(!e)return requestAnimationFrame(render);e.textContent="";const t=s&&!0;drawGraph("https://xeome.github.io",t,[{"/moc":"#4388cc"}],t?{centerForce:.5,depth:-1,enableDrag:!0,enableLegend:!1,enableZoom:!0,fontSize:.5,linkDistance:1,opacityScale:3,repelForce:4,scale:1.4}:{centerForce:1,depth:1,enableDrag:!0,enableLegend:!1,enableZoom:!0,fontSize:.6,linkDistance:1,opacityScale:3,repelForce:2,scale:1.2})}var i=document.getElementsByClassName("mermaid");i.length>0&&import("https://unpkg.com/mermaid@9/dist/mermaid.esm.min.mjs").then(e=>{e.default.init()});function a(n){const e=n.target,t=e.className.split(" "),s=t.includes("broken"),o=t.includes("internal-link");plausible("Link Click",{props:{href:e.href,broken:s,internal:o,graph:!1}})}const r=document.querySelectorAll("a");for(link of r)link.className.includes("root-title")&&link.addEventListener("click",a,{once:!0})},init=(e=document)=>{addCopyButtons(),addTitleToCodeBlocks(),renderMathInElement(e.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1}],macros:{'â€™':"'"},throwOnError:!1})}</script><script type=module>
    import { attachSPARouting } from "https:\/\/xeome.github.io\/js\/router.d6fe6bd821db9ea97f9aeefae814d8e7.min.js"
    attachSPARouting(init, render)
  </script><script defer data-domain=xeome.github.io src=https://plausible.io/js/script.js></script>
<script>window.plausible=window.plausible||function(){(window.plausible.q=window.plausible.q||[]).push(arguments)}</script></head><body><div id=search-container><div id=search-space><input autocomplete=off id=search-bar name=search type=text aria-label=Search placeholder="Search for something..."><div id=results-container></div></div></div><script src=https://cdn.jsdelivr.net/npm/flexsearch@0.7.21/dist/flexsearch.bundle.js integrity="sha256-i3A0NZGkhsKjVMzFxv3ksk0DZh3aXqu0l49Bbh0MdjE=" crossorigin=anonymous defer></script>
<script defer src=https://xeome.github.io/js/full-text-search.e6e2e0c213187ca0c703d6e2c7a77fcd.min.js></script><div class=singlePage><header><h1 id=page-title><a class=root-title href=https://xeome.github.io/>Xeome's Notes</a></h1><div class=spacer></div><div id=search-icon><p>Search</p><svg tabindex="0" aria-labelledby="title desc" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 19.9 19.7"><title id="title">Search Icon</title><desc id="desc">Icon to open search</desc><g class="search-path" fill="none"><path stroke-linecap="square" d="M18.5 18.3l-5.4-5.4"/><circle cx="8" cy="8" r="7"/></g></svg></div><div class=darkmode><input class=toggle id=darkmode-toggle type=checkbox tabindex=-1>
<label id=toggle-label-light for=darkmode-toggle tabindex=-1><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="dayIcon" viewBox="0 0 35 35" style="enable-background:new 0 0 35 35"><title>Light Mode</title><path d="M6 17.5C6 16.672 5.328 16 4.5 16h-3C.672 16 0 16.672.0 17.5S.672 19 1.5 19h3C5.328 19 6 18.328 6 17.5zM7.5 26c-.414.0-.789.168-1.061.439l-2 2C4.168 28.711 4 29.086 4 29.5 4 30.328 4.671 31 5.5 31c.414.0.789-.168 1.06-.44l2-2C8.832 28.289 9 27.914 9 27.5 9 26.672 8.329 26 7.5 26zm10-20C18.329 6 19 5.328 19 4.5v-3C19 .672 18.329.0 17.5.0S16 .672 16 1.5v3C16 5.328 16.671 6 17.5 6zm10 3c.414.0.789-.168 1.06-.439l2-2C30.832 6.289 31 5.914 31 5.5 31 4.672 30.329 4 29.5 4c-.414.0-.789.168-1.061.44l-2 2C26.168 6.711 26 7.086 26 7.5 26 8.328 26.671 9 27.5 9zM6.439 8.561C6.711 8.832 7.086 9 7.5 9 8.328 9 9 8.328 9 7.5c0-.414-.168-.789-.439-1.061l-2-2C6.289 4.168 5.914 4 5.5 4 4.672 4 4 4.672 4 5.5c0 .414.168.789.439 1.06l2 2.001zM33.5 16h-3c-.828.0-1.5.672-1.5 1.5s.672 1.5 1.5 1.5h3c.828.0 1.5-.672 1.5-1.5S34.328 16 33.5 16zM28.561 26.439C28.289 26.168 27.914 26 27.5 26c-.828.0-1.5.672-1.5 1.5.0.414.168.789.439 1.06l2 2C28.711 30.832 29.086 31 29.5 31c.828.0 1.5-.672 1.5-1.5.0-.414-.168-.789-.439-1.061l-2-2zM17.5 29c-.829.0-1.5.672-1.5 1.5v3c0 .828.671 1.5 1.5 1.5s1.5-.672 1.5-1.5v-3C19 29.672 18.329 29 17.5 29zm0-22C11.71 7 7 11.71 7 17.5S11.71 28 17.5 28 28 23.29 28 17.5 23.29 7 17.5 7zm0 18c-4.136.0-7.5-3.364-7.5-7.5s3.364-7.5 7.5-7.5 7.5 3.364 7.5 7.5S21.636 25 17.5 25z"/></svg></label><label id=toggle-label-dark for=darkmode-toggle tabindex=-1><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="nightIcon" viewBox="0 0 100 100" style="enable-background='new 0 0 100 100'"><title>Dark Mode</title><path d="M96.76 66.458c-.853-.852-2.15-1.064-3.23-.534-6.063 2.991-12.858 4.571-19.655 4.571C62.022 70.495 50.88 65.88 42.5 57.5 29.043 44.043 25.658 23.536 34.076 6.47c.532-1.08.318-2.379-.534-3.23-.851-.852-2.15-1.064-3.23-.534-4.918 2.427-9.375 5.619-13.246 9.491-9.447 9.447-14.65 22.008-14.65 35.369.0 13.36 5.203 25.921 14.65 35.368s22.008 14.65 35.368 14.65c13.361.0 25.921-5.203 35.369-14.65 3.872-3.871 7.064-8.328 9.491-13.246C97.826 68.608 97.611 67.309 96.76 66.458z"/></svg></label></div></header><article><h1>OSPF</h1><p class=meta>Last updated
Jan 20, 2023
<a href=https://github.com/xeome/xeome.github.io/tree/hugo/content/notes/OSPF.md rel=noopener>Edit Source</a></p><ul class=tags></ul><p>WIP</p><a href=#link-state-routing-protocols><h1 id=link-state-routing-protocols><span class=hanchor arialabel=Anchor># </span>Link-state routing protocols</h1></a><p>Routers in a link-state routing protocol exchange information about the state of their own links via a process known as link-state advertising. Each router broadcasts to all other routers in the network a link-state advertisement (LSA) containing information about the state of its own links.</p><p>The LSA includes the following information:</p><ul><li>The router&rsquo;s ID: This is a unique identifier for the router.</li><li>The links or neighbors the router is connected to: This includes the destination of the link, the cost or metric of the link, and the status of the link (up or down).</li><li>The sequence number: This is a number that indicates the age of the LSA. The router increments the sequence number each time it sends an updated LSA.</li></ul><p>When a router receives an LSA from another router, it stores the information in its own link-state database and sends a copy to all of its neighbors. This procedure is repeated until all routers in the network have received the LSA and updated their link-state databases.</p><p>The topological map of the entire network is stored in the link-state database, which the router uses to calculate the shortest path to a destination using a routing algorithm. The topological map is used to calculate the shortest path between any two points in the network using a routing algorithm, such as Dijkstra&rsquo;s algorithm. This allows the router to determine the best path to send data packets to their destination.</p><p>Although link-state routing protocols are more complex and resource-intensive than distance-vector routing protocols, they have several advantages. They provide more accurate and up-to-date network information, allowing for more efficient routing. They also enable the creation of hierarchical networks, in which the network is divided into smaller sections and only the links between these sections are exchanged between routers, reducing the amount of information exchanged and increasing efficiency.</p><p>One example of a link-state routing protocol is Open Shortest Path First (OSPF).</p><a href=#open-shortest-path-first-ospf><h1 id=open-shortest-path-first-ospf><span class=hanchor arialabel=Anchor># </span>Open Shortest Path First (OSPF)</h1></a><a href=#ospf-packet-types><h2 id=ospf-packet-types><span class=hanchor arialabel=Anchor># </span>OSPF Packet Types</h2></a><p>Open Shortest Path First (OSPF) is a link-state routing protocol that exchanges information between routers using five different types of protocol packets or messages. These packets are:</p><ol><li><p>Hello: The Hello packet is used by routers to establish and maintain neighbor relationships. It is sent on a regular basis to all of a router&rsquo;s neighbors to confirm that the link is still active and to negotiate OSPF connection parameters such as the router&rsquo;s ID and the area it belongs to.</p></li><li><p>Database Description (DD): The DD packet is used by routers to exchange link-state information. A router sends it to its neighbors in order to describe the contents of its link-state database. This information is then used by the neighbors to update their own link-state databases.</p></li><li><p>Link-State Request (LSR): The LSR packet is used to ask a neighbor for specific pieces of link-state information. If a router&rsquo;s link-state database is missing some information, it can send an LSR to request the missing data.</p></li><li><p>Link-State Update (LSU): The LSU packet is used to send link-state information to a neighbor. It is sent in response to an LSR or as part of the routers&rsquo; regular exchange of link-state information.</p></li><li><p>Link-State Acknowledgment (LSAck): The LSAck packet is used to acknowledge the receipt of an LSU. A router sends it to the LSU sender to confirm that the link-state information was received and processed correctly.</p></li></ol><p>These five types of OSPF packets are used to establish and maintain neighbor relationships, exchange link-state information, and ensure the link-state database&rsquo;s accuracy and reliability.</p><a href=#ospf-entries><h2 id=ospf-entries><span class=hanchor arialabel=Anchor># </span>OSPF Entries</h2></a><p>In Open Shortest Path First (OSPF), there are three types of entries or tables that are used to store information about the network. These tables are:</p><ol><li><p>Router table: The router table, also known as the forwarding table, stores information about all known network destinations&rsquo; routes. It is used by the router to determine the next hop for a forwarded packet. The router table is filled with data from the link-state database.<img src="/notes/assets/img/O_Pasted image 20221224185350.png" width=auto></p></li><li><p>Link-state database: The link-state database stores a detailed representation of the entire network, including information about the links and neighbors of each router, as well as the cost or metric of each link. The link-state database is populated using link-state advertisements (LSAs) received from other routers. <code>display ospf lsdb</code> command to view lsdb information.<img src="/notes/assets/img/O_Pasted image 20221224185330.png" width=auto></p></li><li><p>Neighbor table: The neighbor table stores data about the routers that are directly connected to the local router. It contains the router&rsquo;s ID, the link to the neighbor, and the neighbor&rsquo;s status (up or down). The neighbor table is used to keep track of neighbors and exchange link-state information with other routers. <code>displayÂ ospfÂ peer</code>Â commandÂ toÂ viewÂ statusÂ information.<img src="/notes/assets/img/O_Pasted image 20221224185301.png" width=auto></p></li></ol><p>These three tables are used by OSPF routers to exchange information about the network and determine the best route for forwarding packets to their destination.</p><a href=#establishing-ospf-adjacency><h2 id=establishing-ospf-adjacency><span class=hanchor arialabel=Anchor># </span>Establishing OSPF adjacency</h2></a><p>Routers discover each other by exchanging Hello packets. When a router receives a Hello packet from a neighbor, it adds the neighbor to its neighbor table and replies with another Hello packet. This establishes the two routers&rsquo; neighbor relationship. They negotiate which router will be the master and which will be the slave. The master router initiates the exchange of link-state information, while the slave router responds to information requests.</p><p>The role of master or slave is determined based on the following criteria:</p><ol><li><p>Router ID: The router with the highest Router ID becomes the master. The Router ID is a unique identifier for each router, and it is determined by the highest IP address of the router&rsquo;s active interfaces.</p></li><li><p>Priority: If the Router IDs are the same, the router with the highest priority becomes the master. The priority is a value between 0 and 255 that can be manually configured on each router. If the priorities are also the same, both routers become masters.</p></li></ol><p>After establishing a neighbor relationship, the routers begin exchanging link-state information. A Database Description (DD) packet is sent from one router to the other, describing the <strong>summary</strong> of contents of its link-state database. The other router then sends a Link-State Request (LSR) packet to inquire about any missing data. The first router responds with the requested information in the form of a Link-State Update (LSU) packet. After that, the other router sends LSAck to confirm receipt of the LSU. This process is repeated until each router has a complete copy of the other&rsquo;s link-state database.</p><p>Both routers are considered fully adjacent once they have a complete copy of each other&rsquo;s link-state database. They can then exchange routing information and forward packets to one another.</p><p><img src="/notes/assets/img/O_Pasted image 20221224191057.png" width=auto></p><a href=#dr-and-bdr><h2 id=dr-and-bdr><span class=hanchor arialabel=Anchor># </span>DR and BDR</h2></a><p>In Open Shortest Path First (OSPF), the Designated Router (DR) and the Backup Designated Router (BDR) are special roles that are used to reduce the amount of link-state information that is exchanged between routers in a multi-access network, such as a LAN.</p><p>A multi-access network is a type of network where multiple devices are connected to the same physical link, such as a Ethernet switch. In a multi-access network, all the routers are connected to the same broadcast domain, and they can all send and receive packets to and from any other device on the network.</p><p>In OSPF, the DR and BDR are responsible for exchanging link-state information with the other routers in the network. This reduces the amount of link-state information that needs to be exchanged, as the other routers only need to exchange information with the DR and BDR, rather than with every other router on the network.</p><p>The DR is the primary router responsible for exchanging link-state information, while the BDR is a backup router that takes over if the DR fails. The DR and BDR are elected by the routers in the network based on their Router IDs and priorities. The router with the highest Router ID becomes the DR, and the router with the next highest Router ID becomes the BDR. If the Router IDs are the same, the router with the highest priority becomes the DR. If the priorities are also the same, both routers become DRs.</p><p>In summary, the DR and BDR are special roles in OSPF that are used to reduce the amount of link-state information exchanged in a multi-access network. The DR is the primary router responsible for exchanging link-state information, while the BDR is a backup router that takes over if the DR fails. The DR and BDR are elected by the routers in the network based on their Router IDs and priorities.</p><a href=#multi-area-ospf><h2 id=multi-area-ospf><span class=hanchor arialabel=Anchor># </span>Multi Area OSPF</h2></a><p>In Open Shortest Path First (OSPF), a multi-area network is a network that is divided into multiple areas, with each area containing a collection of networks and routers that are connected by a common <strong>area border router (ABR)</strong>. This allows for more efficient routing within the OSPF network, as routers within the same area exchange information about the state of their own links and do not need to exchange information about links in other areas.</p><p>Each area in a multi-area OSPF network is given a unique area ID, which is used to identify the area in the link-state database. The ABR is in charge of connecting the area to the rest of the network and exchanging link-state information with other areas.</p><p>In the form of a summary LSA, the ABR sends a summary of the link-state information for the area to the other areas. This allows the other areas to get a high-level view of the networks in the area without having to keep detailed information about every link and router.</p><p>The ABR also maintains a link-state database for the entire network, which includes information about the links and routers in all the areas. This allows the ABR to route packets between areas and to calculate the shortest path between any two points in the network.</p><p>Multi-area OSPF provides several benefits, including improved scalability and reduced network traffic. It also allows for the creation of a hierarchical network structure, which can make it easier to manage and troubleshoot the network.</p></article><hr><div class=page-end id=footer><div class=backlinks-container><h3>Backlinks</h3><ul class=backlinks><li><a href=/notes/Networking/ data-ctx=notes/OSPF data-src=/notes/Networking class=internal-link>Networking</a></li></ul></div><div><script async src=https://cdn.jsdelivr.net/npm/d3@6.7.0/dist/d3.min.js integrity="sha256-+7jaYCp29O1JusNWHaYtgUn6EhuP0VaFuswhNV06MyI=" crossorigin=anonymous></script><h3>Interactive Graph</h3><div id=graph-container></div><style>:root{--g-node:var(--secondary);--g-node-active:var(--primary);--g-node-inactive:var(--visited);--g-link:var(--outlinegray);--g-link-active:#5a7282}</style><script src=https://xeome.github.io/js/graph.6579af7b10c818dbd2ca038702db0224.js></script></div></div><div id=contact_buttons><footer><p>Made by xeome using <a href=https://github.com/jackyzha0/quartz>Quartz</a>, Â© 2023</p><ul><li><a href=https://xeome.github.io/>Home</a></li><li><a href=https://github.com/xeome>Github</a></li></ul></footer></div></div></body></html>